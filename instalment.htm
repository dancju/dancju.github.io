<!doctype HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Calculator for APR of Instalment</title>
<style>
body {
  font-family: sans-serif;
}
.page-header {
  color: gray;
  text-align: center;
}
div {
  font-size: large;
  margin-bottom: .5em;
  text-align: center;
}
.red {
  color: indianred;
}
.red>input {
  border: none;
  border-bottom: 1px solid;
  color: indianred;
  font-family: monospace;
  font-size: xx-large;
  text-align: right;
}
.red>span {
  border-bottom: 1px solid;
  font-family: monospace;
  font-size: xx-large;
  padding-bottom: 1px;
}
.gray {
  color: gray;
}
.gray>span {
  font-family: monospace;
  font-size: xx-large;
}
button {
  border: none;
  background-color: rgba(0, 0, 0, 0);
  border-bottom: 2px dotted;
  color: inherit;
  margin: 2px;
}
</style>
<script>
var benchmark = function(period, fee, apr) {
  var res = Math.pow(1/(1+apr), 1/12);
  res = res*(1-Math.pow(res, period))/(1-res);
  res *= 1/period+fee;
  return res;
};
var getPay = function(period, fee) {
  return 1/period+fee;
}
var getAPR = function(period, fee) {
  var lo = 0, hi = 1;
  while(hi-lo>Number.EPSILON) {
    var mi = (lo+hi)/2;
    if(benchmark(period, fee, mi) < 1)
      hi = mi;
    else
      lo = mi;
  }
  return lo;
};
var update = function() {
  var peroid = parseInt(document.getElementById('peroid').value);
  var fee = parseFloat(document.getElementById('fee').value)/100;
  document.getElementById('apr').innerText = (getAPR(peroid, fee)*100).toFixed(2)
  document.getElementById('pay').innerText = (getPay(peroid, fee)*100).toFixed(2)
};
var assign = function(peroid, fee) {
  document.getElementById('peroid').value = peroid;
  document.getElementById('fee').value = fee;
  update();
};
window.onload = function() {
  update();
  document.getElementById('peroid').onkeyup = update;
  document.getElementById('fee').onkeyup = update;
};
</script>
</head>
<body>

<h2 class="page-header">
分期年化利率计算器
<br>
Calculator for APR of Instalment
<hr>
</h2>

<div class="red">
分 <input id="peroid" type="number" style="max-width: 2.4em;" value="12"> 期偿还，
<br>
每期费率为 <input id="fee" type="number" step="0.01" style="max-width: 3.6em;" value="0.35"><span>%</span>．
</div>

<div class="gray">
❦
<br>
每期偿还本金的 <span id="pay"></span><span>%</span>，
<br>
年化利率为 <span id="apr"></span><span>%</span>．
<br>
❦
<br>
<button onclick="assign(2, 1)">招账 2</button>
<button onclick="assign(3, .9)">招账 3</button>
<button onclick="assign(6, .75)">招账 6</button>
<button onclick="assign(10, .7)">招账 10</button>
<button onclick="assign(12, .66)">招账 12</button>
<button onclick="assign(18, .68)">招账 18</button>
<button onclick="assign(24, .68)">招账 24</button>
<br>
<button onclick="assign(3, .95)">招现 3</button>
<button onclick="assign(6, .8)">招现 6</button>
<button onclick="assign(10, .75)">招现 10</button>
<button onclick="assign(12, .75)">招现 12</button>
<button onclick="assign(18, .75)">招现 18</button>
<button onclick="assign(24, .75)">招现 24</button>
<br>
<button onclick="assign(3, 1)">白条 3</button>
<button onclick="assign(6, 1)">白条 6</button>
<button onclick="assign(12, 1)">白条 12</button>
<button onclick="assign(24, 1)">白条 24</button>
<br>
❦
<br>
<img style="-webkit-filter: invert(50%); filter: invert(50%); zoom: 50%;" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="392" height="106pt" viewBox="0 0 294 106"><defs><symbol overflow="visible" id="a"><path d="M10.55-22.95c0-.86 0-.93-.83-.93-2.22 2.3-5.38 2.3-6.53 2.3v1.1c.7 0 2.8 0 4.7-.93v18.5c0 1.2-.2 1.7-3.4 1.7H3.4V0c1.27-.1 4.4-.1 5.83-.1 1.44 0 4.55 0 5.8.1v-1.1H13.9c-3.22 0-3.33-.4-3.33-1.73zm0 0"/></symbol><symbol overflow="visible" id="b"><path d="M24.64-11.72c.53 0 1.22 0 1.22-.72s-.7-.72-1.2-.72H3.2c-.5 0-1.18 0-1.18.72s.67.72 1.2.72zm.03 6.95c.5 0 1.2 0 1.2-.7 0-.73-.7-.73-1.23-.73H3.24c-.55 0-1.22 0-1.22.72 0 .7.67.7 1.17.7zm0 0"/></symbol><symbol overflow="visible" id="h"><path d="M14.67-8.25h10c.5 0 1.2 0 1.2-.72s-.7-.72-1.2-.72h-10v-10c0-.5 0-1.2-.72-1.2s-.72.7-.72 1.2v10H3.2c-.5 0-1.18 0-1.18.8 0 .7.67.7 1.17.7h10v10c0 .5 0 1.2.7 1.2s.7-.6.7-1.1zm0 0"/></symbol><symbol overflow="visible" id="j"><path d="M11.88 8.6c0-.1 0-.18-.6-.8C6.78 3.3 5.62-3.47 5.62-8.96 5.62-15.2 7-21.43 11.4-25.9c.47-.45.47-.5.47-.6 0-.27-.15-.38-.35-.38-.36 0-3.6 2.45-5.7 7C3.97-15.96 3.54-12 3.54-8.98c0 2.8.4 7.14 2.37 11.2 2.2 4.4 5.3 6.74 5.6 6.74.2 0 .4-.1.4-.36zm0 0"/></symbol><symbol overflow="visible" id="l"><path d="M10.36-8.97c0-2.8-.4-7.12-2.36-11.2-2.16-4.4-5.23-6.72-5.6-6.72-.2 0-.35.2-.35.4 0 .1 0 .2.67.8 3.5 3.6 5.56 9.3 5.56 16.8C8.28-2.8 6.95 3.5 2.52 8c-.47.43-.47.5-.47.6 0 .24.14.38.36.38.4 0 3.6-2.44 5.7-7 1.9-3.95 2.3-7.93 2.3-10.95zm0 0"/></symbol><symbol overflow="visible" id="c"><path d="M1.9 3.06c-.2.7-.24.9-1.24.9-.33 0-.7 0-.7.54 0 .27.24.38.37.38.65 0 1.48-.1 2.15-.1.86 0 1.82.1 2.65.1.2 0 .5-.08.5-.57 0-.3-.36-.3-.66-.3-.55 0-1.24 0-1.24-.3 0-.1.2-.7.3-1.1.28-1.3.64-2.7.92-3.7.3.5 1.08 1.5 2.58 1.5 3.07 0 6.45-3.4 6.45-7.1 0-2.9-2.03-4.2-3.76-4.2-1.56 0-2.9 1.1-3.56 1.8-.43-1.4-1.83-1.8-2.6-1.8-.97 0-1.58.7-1.98 1.4-.5.9-.9 2.4-.9 2.56 0 .3.35.3.43.3.4 0 .4-.1.6-.76.4-1.45.9-2.7 1.9-2.7.7 0 .9.55.9 1.22 0 .27 0 .6-.1.74zM6.6-8.06c1.46-1.94 2.72-2.3 3.52-2.3.98-.02 1.84.72 1.84 2.42 0 1.03-.56 3.6-1.3 5.05C10.04-1.6 8.8-.4 7.52-.4 5.75-.42 5.3-2.4 5.3-2.62c0-.1.04-.3.08-.4zm0 0"/></symbol><symbol overflow="visible" id="e"><path d="M8.14-15.7c0-.4-.3-.94-1.02-.94-.67 0-1.4.64-1.4 1.37 0 .43.33.96 1 .96.73 0 1.42-.8 1.42-1.4zM3.02-2.93c-.1.33-.24.63-.24 1.05C2.78-.7 3.8.26 5.18.26c2.5 0 3.6-3.47 3.6-3.84 0-.32-.3-.32-.4-.32-.35 0-.36.15-.47.44-.5 2-1.6 3.03-2.6 3.03-.5 0-.6-.33-.6-.88 0-.6.2-1.1.4-1.6L5.9-5c.2-.6 1.1-2.87 1.23-3.2.07-.24.14-.54.14-.8 0-1.18-1-2.13-2.36-2.13-2.5 0-3.6 3.42-3.6 3.85 0 .3.4.3.4.3.4 0 .4-.12.5-.4.7-2.16 1.8-3.07 2.7-3.07.4 0 .6.2.6.9 0 .56-.1.94-.8 2.5zm0 0"/></symbol><symbol overflow="visible" id="m"><path d="M12.58-17.73c.15-.32.15-.38.15-.47 0-.4-.32-.63-.6-.63-.43 0-.55.3-.68.63L2.08 5.17c-.14.33-.14.38-.14.5 0 .38.33.6.6.6.43 0 .55-.3.68-.6zm0 0"/></symbol><symbol overflow="visible" id="d"><path d="M45.4 50.2l4.33-11.47h-.9c-1.4 3.72-5.2 6.16-9.3 7.24-.76.2-4.28 1.1-11.17 1.1H6.73L25 25.67c.25-.27.3-.4.3-.57 0-.07 0-.18-.24-.54L8.36 1.72H28c4.8 0 8.08.5 8.4.58 1.93.28 5.05.9 7.88 2.68.9.58 3.34 2.2 4.56 5.1h.9L45.38 0H3c-.83 0-.86.03-.97.25-.03.1-.03.8-.03 1.2L20.96 27.4 2.4 49.14c-.35.43-.35.6-.35.65 0 .4.3.4.97.4zm0 0"/></symbol><symbol overflow="visible" id="f"><path d="M19.28-8.44c.38 0 .95 0 .95-.62 0-.6-.6-.6-.92-.6H2.7c-.34 0-.95 0-.95.6 0 .62.58.62.97.62zm.03 5.53c.4 0 1 0 1-.7s-.5-.6-.9-.6H2.7c-.4 0-.97 0-.97.6s.6.6.94.6zm0 0"/></symbol><symbol overflow="visible" id="g"><path d="M8.4-15.97c0-.67-.04-.7-.74-.7-1.6 1.58-3.9 1.6-4.93 1.6v.9c.6 0 2.27 0 3.65-.7v12.8c0 .84 0 1.16-2.52 1.16H2.9V0c.46-.03 3.55-.1 4.47-.1.8 0 3.96.07 4.5.1v-.9h-.95c-2.5 0-2.5-.33-2.5-1.16zm0 0"/></symbol><symbol overflow="visible" id="n"><path d="M12.7-4.56h-.87c-.08.54-.33 2.03-.66 2.28-.2.14-2.12.14-2.48.14H4c2.7-2.33 3.58-3.03 5.1-4.22 1.85-1.47 3.6-3.03 3.6-5.42 0-3.03-2.68-4.9-5.9-4.9-3.1 0-5.22 2.2-5.22 4.5 0 1.3 1.08 1.4 1.33 1.4.7 0 1.4-.42 1.4-1.33 0-.5-.2-1.4-1.5-1.4.8-1.8 2.5-2.4 3.7-2.4 2.5 0 3.9 1.9 3.9 4C10.4-9.7 8.8-8 8-7.1L1.87-1c-.28.24-.28.3-.28 1h10.3zm0 0"/></symbol><symbol overflow="visible" id="i"><path d="M13.16-14.34h3.1c.7 0 1.05 0 1.05-.72 0-.4-.3-.4-.9-.4h-3l.8-4.1c.2-.74.7-3.28.9-3.7.3-.7.9-1.22 1.7-1.22.1 0 1.1 0 1.8.64-1.6.14-1.9 1.4-1.9 1.93 0 .8.65 1.2 1.3 1.2.96 0 2-.8 2-2.2 0-1.7-1.64-2.5-3.1-2.5-1.23 0-3.5.6-4.6 4.2-.2.7-.3 1.1-1.13 5.6H8.5c-.7 0-1.08 0-1.08.6 0 .4.3.4 1 .4h2.33L8-.2c-.6 3.48-1.2 6.7-3.1 6.7-.1 0-1 0-1.7-.62 1.68-.1 2-1.4 2-1.9 0-.8-.65-1.2-1.33-1.2-.93 0-1.96.8-1.96 2.15C1.9 6.55 3.5 7.4 5 7.4c2 0 3.4-2.1 4.1-3.47 1.15-2.27 1.98-6.6 2.03-6.85zm0 0"/></symbol><symbol overflow="visible" id="k"><path d="M17.1-8.47c0-5.62-3.33-7.37-6-7.37-4.9 0-9.63 5.12-9.63 10.17C1.47-2.33 3.63.4 7.27.4c2.26 0 4.86-.84 7.57-3.02.47 1.9 1.66 3 3.27 3 2 0 3.1-1.96 3.1-2.54 0-.25-.2-.36-.4-.36s-.3.1-.4.36c-.7 1.76-2 1.76-2 1.76-1.1 0-1.1-2.8-1.1-3.63 0-.76 0-.83.36-1.26 3.36-4.2 4.1-8.4 4.1-8.4 0-.1-.04-.3-.43-.3-.36 0-.36.2-.54.8-.6 2.3-1.8 5-3.5 7.1zm-2.4 4.92C11.55-.78 8.78-.4 7.34-.4 5.2-.4 4.14-2 4.14-4.3c0-1.76.92-5.64 2.06-7.47 1.7-2.6 3.63-3.3 4.88-3.3 3.54 0 3.54 4.7 3.54 7.5 0 1.34 0 3.4.08 4.02zm0 0"/></symbol></defs><use xlink:href="#a" x="-2.26" y="62.73"/><use xlink:href="#b" x="25.64" y="62.73"/><use xlink:href="#c" x="82" y="16.21"/><use xlink:href="#d" x="63.49" y="28.66"/><use xlink:href="#e" x="66.16" y="105.05"/><use xlink:href="#f" x="76.31" y="105.05"/><use xlink:href="#g" x="98.33" y="105.05"/><use xlink:href="#g" x="169.79" y="17.38"/><path d="M169.54 22.53h14.8" fill="none" stroke-width="1.44" stroke="#000" stroke-miterlimit="10"/><use xlink:href="#c" x="169.54" y="43.87"/><use xlink:href="#h" x="196.6" y="31.5"/><use xlink:href="#i" x="232.47" y="31.5"/><path d="M125.58 53.77h167.97" fill="none" stroke-width="1.44" stroke="#000" stroke-miterlimit="10"/><use xlink:href="#j" x="125.58" y="95.65"/><use xlink:href="#a" x="139.53" y="95.65"/><use xlink:href="#h" x="165.42" y="95.65"/><use xlink:href="#k" x="201.29" y="95.65"/><use xlink:href="#l" x="224.37" y="95.65"/><use xlink:href="#e" x="238.32" y="77.62"/><use xlink:href="#m" x="248.46" y="77.62"/><use xlink:href="#g" x="263.16" y="77.62"/><use xlink:href="#n" x="277.46" y="77.62"/></svg>'>
<br>
其中，p 为期数，ƒ 为费率，α 为年化利率．
<br>
❦
<br>
个人消费贷的年利率约为 6%．
<br>
信用卡循环利息的年化利率约为 19.86%．
</div>

</body>
</html>
